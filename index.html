<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cem Ozturk</title>

<style>
:root{
  --wall:#e6e6e6;
  --wall2:#f2f2f2;
  --pinRed:#d12a2a;
  --pinBlue:#1c4bd1;
  --pinBlack:#2a2a2a;
  --shadow:0 18px 40px rgba(0,0,0,.25);
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  overflow:hidden;
  background:
    radial-gradient(900px 700px at 10% 10%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(800px 600px at 90% 20%, rgba(0,0,0,.08), transparent 55%),
    repeating-linear-gradient(0deg, rgba(0,0,0,.025) 0 2px, transparent 2px 6px),
    linear-gradient(135deg, var(--wall), var(--wall2));
  font-family: Georgia, serif;
}

body::before{
  content:"";
  position:fixed; inset:0;
  pointer-events:none;
  background-image:
    radial-gradient(rgba(0,0,0,.06) 1px, transparent 1px),
    radial-gradient(rgba(255,255,255,.5) 1px, transparent 1px);
  background-size:30px 30px,38px 38px;
  opacity:.35;
}

/* Masthead */
.masthead{
  position:fixed;
  top:18px; left:50%;
  transform:translateX(-50%);
  padding:14px 20px;
  border-radius:999px;
  background:rgba(250,250,250,.9);
  z-index:50;
  text-align:center;
  box-shadow:0 8px 20px rgba(0,0,0,.12);
}
.masthead h1{
  margin:0;
  font-size:28px;
  letter-spacing:.08em;
  text-transform:uppercase;
}
.masthead p{
  margin:4px 0 0;
  font-size:13px;
  opacity:.7;
  font-family:system-ui;
}

/* Board */
.board{
  position:relative;
  width:100vw;
  height:100vh;
  padding-top:140px;
}

/* Focus dim */
.focus-dim{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  opacity:0;
  pointer-events:none;
  transition:opacity .35s ease;
  z-index:80;
}
.focus-dim.on{
  opacity:1;
  pointer-events:auto;
}

/* Documents */
.doc{
  position:absolute;
  transform:rotate(var(--rot));
  transition:
    left .45s cubic-bezier(.22,.61,.36,1),
    top .45s cubic-bezier(.22,.61,.36,1),
    transform .35s cubic-bezier(.22,.61,.36,1),
    filter .25s ease,
    opacity .25s ease;
  cursor:grab;
  user-select:none;

  /* Critical for reliable pointer dragging */
  touch-action:none;
  -webkit-user-drag:none;
}
.doc:active{cursor:grabbing}

.pin{
  position:absolute;
  top:-10px; left:14px;
  width:16px; height:16px;
  border-radius:50%;
  background:var(--pin);
  box-shadow:0 6px 14px rgba(0,0,0,.25);
  z-index:2;
  pointer-events:none;
}
.pin::after{
  content:"";
  position:absolute;
  inset:4px;
  border-radius:50%;
  background:rgba(255,255,255,.6);
}

/* Photo docs */
.doc img{
  display:block;
  max-width:420px;
  max-height:420px;
  width:auto;
  height:auto;
  box-shadow:var(--shadow);
  pointer-events:none; /* stop image from stealing drag */
}

/* Focused doc */
.doc.focused{
  transform:rotate(0deg) scale(1.12);
  filter:brightness(1.1) contrast(1.05);
  z-index:120;
  cursor:default;
}

/* Other docs during focus */
.doc.dimmed{
  opacity:.35;
}

/* Hint */
.hint{
  position:fixed;
  bottom:14px; right:14px;
  padding:10px 14px;
  border-radius:999px;
  background:rgba(250,250,250,.9);
  font-size:12px;
  font-family:system-ui;
  z-index:60;
}
</style>
</head>

<body>
<header class="masthead">
  <h1>Cem Ozturk</h1>
  <p>Student, researcher, designer</p>
</header>

<div class="focus-dim" id="dim"></div>
<main class="board" id="board"></main>

<div class="hint">Drag documents · Click to focus · ESC to exit</div>

<script>
(function(){
  const board = document.getElementById("board");
  const dim = document.getElementById("dim");

  const photos = [
    {src:"./assets/designer1.jpg", pin:"var(--pinRed)"},
    {src:"./assets/designer2.jpg", pin:"var(--pinBlue)"}
  ];

  const pins = ["var(--pinRed)","var(--pinBlue)","var(--pinBlack)"];
  const rand = (a,b)=>Math.random()*(b-a)+a;
  const pick = a=>a[Math.floor(Math.random()*a.length)];
  const clamp = (v,min,max)=>Math.max(min, Math.min(max, v));

  let focused = null;

  // Stores the “current” resting positions (keeps up with dragging)
  const savedPos = new Map();

  // Drag state
  let dragEl = null;
  let dragPointerId = null;
  let dragStartX = 0, dragStartY = 0;
  let dragStartLeft = 0, dragStartTop = 0;
  let didDrag = false;
  const DRAG_THRESHOLD = 6; // px

  function savePosition(el){
    savedPos.set(el, {
      left: parseFloat(el.style.left) || 0,
      top:  parseFloat(el.style.top)  || 0
    });
  }

  function makeDoc(i){
    const d = document.createElement("article");
    d.className = "doc";
    d.style.setProperty("--rot", rand(-6,6).toFixed(2)+"deg");
    d.style.setProperty("--pin", photos[i]?.pin || pick(pins));

    d.innerHTML = `
      <span class="pin"></span>
      <img src="${photos[i].src}" alt="">
    `;

    board.appendChild(d);

    const img = d.querySelector("img");
    img.onload = () => {
      const w = Math.min(img.naturalWidth,420);
      const h = Math.min(img.naturalHeight,420);
      d.style.width = w+"px";
      d.style.height = h+"px";

      d.style.left = rand(40, innerWidth - w - 40) + "px";
      d.style.top  = rand(180, innerHeight - h - 40) + "px";

      savePosition(d);
    };

    // Pointer drag
    d.addEventListener("pointerdown", (e) => {
      if (focused) return; // don’t drag in focus mode
      dragEl = d;
      dragPointerId = e.pointerId;
      didDrag = false;

      // Raise above others while dragging
      d.style.zIndex = "110";

      dragStartX = e.clientX;
      dragStartY = e.clientY;
      dragStartLeft = parseFloat(d.style.left) || 0;
      dragStartTop  = parseFloat(d.style.top)  || 0;

      d.setPointerCapture(dragPointerId);
      e.preventDefault();
    });

    d.addEventListener("pointermove", (e) => {
      if (!dragEl || dragEl !== d || e.pointerId !== dragPointerId) return;

      const dx = e.clientX - dragStartX;
      const dy = e.clientY - dragStartY;

      if (!didDrag && (Math.abs(dx) > DRAG_THRESHOLD || Math.abs(dy) > DRAG_THRESHOLD)) {
        didDrag = true;
      }

      const newLeft = clamp(dragStartLeft + dx, 12, innerWidth - d.offsetWidth - 12);
      const newTop  = clamp(dragStartTop  + dy, 120, innerHeight - d.offsetHeight - 12);

      d.style.left = Math.round(newLeft) + "px";
      d.style.top  = Math.round(newTop)  + "px";

      e.preventDefault();
    });

    function endDrag(){
      if (!dragEl || dragEl !== d) return;
      // Save wherever you dropped it so focus/ESC returns to THIS layout
      savePosition(d);
      dragEl = null;
      dragPointerId = null;
      // let zIndex go back to normal stacking
      d.style.zIndex = "";
    }

    d.addEventListener("pointerup", endDrag);
    d.addEventListener("pointercancel", endDrag);

    // Click to focus (but ignore clicks that were actually drags)
    d.addEventListener("click", () => {
      if (didDrag) return;
      toggleFocus(d);
    });

    return d;
  }

  function toggleFocus(doc){
    if (focused) {
      clearFocus();
      return;
    }
    focused = doc;
    dim.classList.add("on");

    const fr = doc.getBoundingClientRect();
    const fx = fr.left + fr.width/2;
    const fy = fr.top  + fr.height/2;

    document.querySelectorAll(".doc").forEach(d=>{
      if(d === doc){
        d.classList.add("focused");
        // Keep it exactly where it is, don’t “snap”
        return;
      }

      const r = d.getBoundingClientRect();
      const cx = r.left + r.width/2;
      const cy = r.top  + r.height/2;

      let dx = cx - fx;
      let dy = cy - fy;
      const mag = Math.hypot(dx,dy) || 1;
      dx /= mag; dy /= mag;

      const push = 120;

      const o = savedPos.get(d) || {left: parseFloat(d.style.left)||0, top: parseFloat(d.style.top)||0};
      let nx = o.left + dx * push;
      let ny = o.top  + dy * push;

      nx = clamp(nx, 12, innerWidth - r.width - 12);
      ny = clamp(ny, 120, innerHeight - r.height - 12);

      d.style.left = Math.round(nx) + "px";
      d.style.top  = Math.round(ny) + "px";
      d.classList.add("dimmed");
    });
  }

  function clearFocus(){
    dim.classList.remove("on");
    document.querySelectorAll(".doc").forEach(d=>{
      d.classList.remove("focused","dimmed");
      const o = savedPos.get(d);
      if(o){
        d.style.left = o.left + "px";
        d.style.top  = o.top  + "px";
      }
    });
    focused = null;
  }

  dim.addEventListener("click", clearFocus);
  document.addEventListener("keydown", e=>{
    if(e.key === "Escape") clearFocus();
  });

  photos.forEach((_,i)=>makeDoc(i));
})();
</script>

</body>
</html>
