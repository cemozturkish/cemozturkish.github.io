<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cem Ozturk</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

<style>
:root{
  --paper:#fbfbfb;
  --paper2:#f2f2f2;
  --shadow:0 18px 40px rgba(0,0,0,.22);
  --shadowSoft:0 10px 24px rgba(0,0,0,.16);
}

*{
  -webkit-user-select:none;
  user-select:none;
  -webkit-user-drag:none;
}

html,body{
  height:100%;
  margin:0;
}

body{
  overflow:hidden;
  position:relative;
  background-image:url("./assets/newspaper-bg.jpg");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  background-color:#e9e7e2;
  font-family:"Tinos", serif;
}

body::before{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(245,243,238,0.75);
  pointer-events:none;
  z-index:0;
}

.viewport{
  position:fixed;
  inset:0;
  overflow:hidden;
  z-index:1;
}

.board{
  position:absolute;
  inset:0;
  width:100vw;
  height:100vh;
}

.doc{
  position:absolute;
  transform:rotate(var(--rot));
  transform-origin:var(--pinX) 14px;
  cursor:grab;
  touch-action:none;
}
.doc:active{cursor:grabbing}

/* pin */
.pin{
  position:absolute;
  top:6px;
  left:var(--pinX);
  transform:translateX(-50%);
  width:16px;
  height:16px;
  border-radius:50%;
  background:var(--pin);
  box-shadow:0 6px 14px rgba(0,0,0,.25);
  pointer-events:none;
  z-index:6;
}
.pin::after{
  content:"";
  position:absolute;
  inset:4px;
  border-radius:50%;
  background:rgba(255,255,255,.55);
}

.doc--photo::after{
  content:"";
  position:absolute;
  left:var(--pinX);
  top:16px;
  transform:translateX(-50%);
  width:12px;
  height:7px;
  border-radius:999px;
  background:rgba(0,0,0,.16);
  filter:blur(.25px);
  z-index:5;
}

.doc--photo img{
  display:block;
  width:100%;
  height:100%;
  box-shadow:var(--shadow);
  border:1px solid #000;
}

.doc--name{
  background:linear-gradient(180deg,var(--paper),var(--paper2));
  border-radius:999px;
  padding:14px 18px 12px;
  box-shadow:var(--shadowSoft);
  text-align:center;
  z-index:9999;
}
.doc--name h1{
  margin:0;
  font-size:28px;
  letter-spacing:.03em;
}
.doc--name p{
  margin:4px 0 0;
  font-size:13px;
  opacity:.75;
  font-family:system-ui;
}

.hint{
  position:fixed;
  bottom:14px;
  right:14px;
  padding:10px 14px;
  border-radius:999px;
  background:rgba(250,250,250,.9);
  font-size:12px;
  z-index:60;
}
</style>
</head>

<body>

<div class="viewport">
  <main class="board" id="board"></main>
</div>

<div class="hint">Drag photos · Pull name card to swing</div>

<script>
(() => {
  const board = document.getElementById("board");
  const clamp=(v,min,max)=>Math.max(min,Math.min(max,v));
  const rand=(a,b)=>Math.random()*(b-a)+a;
  const PIN_X_OPTIONS=["16%","50%","84%"];

  /* global size bump for all photos */
  const GLOBAL_SCALE = 1.15;

  /* -------- Physics core -------- */
  const phys=new WeakMap(), physDocs=new Set();
  let raf=false,last=0;

  function start(){
    if(raf) return;
    raf=true; last=performance.now();
    requestAnimationFrame(tick);
  }

  function tick(t){
    const dt=Math.min(.033,(t-last)/1000);
    last=t;
    let active=false;

    physDocs.forEach(d=>{
      const p=phys.get(d);
      if(!p) return;

      const acc=(p.target-p.angle)*p.k - p.vel*p.damp;
      p.vel+=acc*dt;
      p.angle+=p.vel*dt;

      d.style.setProperty("--rot",p.angle+"deg");

      if(Math.abs(p.vel)>0.03 || Math.abs(p.angle-p.base)>0.03 || p.drag)
        active=true;
    });

    if(active) requestAnimationFrame(tick);
    else raf=false;
  }

  function makePhys(d,base,{k=60,damp=10}={}){
    phys.set(d,{
      base,
      angle:base,
      target:base,
      vel:0,
      drag:false,
      k,
      damp
    });
    physDocs.add(d);
    d.style.setProperty("--rot",base+"deg");
    start();
  }

  /* -------- Utilities -------- */
  let zTop=100;
  const bringToFront=el=>{
    if(el.classList.contains("doc--name")) return;
    el.style.zIndex=++zTop;
  };

  const gray=()=>{const g=Math.floor(rand(45,105));return`rgb(${g},${g},${g})`;};

  /* -------- Name card: pull-to-swing, pin stable, 360° rotation -------- */
  const name=document.createElement("article");
  name.className="doc doc--name";
  name.style.setProperty("--pinX","50%");
  name.style.setProperty("--pin",gray());
  name.innerHTML=`<span class="pin"></span><h1>Cem Ozturk</h1><p>Student, researcher, designer</p>`;
  board.appendChild(name);

  const baseAngle = rand(-3,3);
  makePhys(name, baseAngle, { k:55, damp:8 });

  name.style.left=(innerWidth-name.offsetWidth)/2+"px";
  name.style.top="20px";

  // continuous angle unwrap so it can spin forever without snapping
  let pivot=null, lastRaw=null, unwrapped=null;

  name.addEventListener("pointerdown",e=>{
    e.preventDefault();
    const r=name.getBoundingClientRect();
    pivot = { x: r.left + r.width/2, y: r.top + 14 }; // fixed pin point in screen coords

    const p=phys.get(name);
    p.drag=true;

    unwrapped = p.angle;
    lastRaw = null;

    name.setPointerCapture(e.pointerId);
    start();
  });

  name.addEventListener("pointermove",e=>{
    const p=phys.get(name);
    if(!p.drag || !pivot) return;

    const dx=e.clientX - pivot.x;
    const dy=e.clientY - pivot.y;
    const raw = Math.atan2(dx,dy) * 180/Math.PI;

    if(lastRaw === null){
      const k = Math.round((unwrapped - raw)/360);
      unwrapped = raw + 360*k;
    } else {
      let delta = raw - lastRaw;
      if(delta > 180) delta -= 360;
      if(delta < -180) delta += 360;
      unwrapped += delta;
    }

    lastRaw = raw;

    p.angle = unwrapped;
    p.target = unwrapped;
    start();
  });

  name.addEventListener("pointerup",()=>{
    const p=phys.get(name);
    p.drag=false;
    p.target=p.base;          // swing back to initial resting angle
    pivot=null; lastRaw=null; unwrapped=null;
    start();
  });

  /* -------- Photos -------- */
  [
    "designer1.jpg",
    "designer2.jpg",
    "designer3.jpg",
    "designer4.jpg",
    "designer5.jpg",
    "events1.jpg"
  ].forEach(src=>{
    const d=document.createElement("article");
    d.className="doc doc--photo";

    const px=PIN_X_OPTIONS[Math.floor(Math.random()*3)];
    d.style.setProperty("--pinX",px);
    d.style.setProperty("--pin",gray());
    d.innerHTML=`<span class="pin"></span><img src="./assets/${src}">`;
    board.appendChild(d);

    // signed gravity tilt depends on pin side
    const pinVal=parseFloat(px);
    const off=Math.abs((pinVal-50)/34);
    const dir=pinVal<50?1:pinVal>50?-1:0;
    makePhys(d,dir*(off*9)+rand(-1,1), {k:60,damp:10});

    bringToFront(d);

    const img=d.querySelector("img");
    img.onload=()=>{
      let scale = GLOBAL_SCALE;
      if (src === "designer1.jpg") scale *= 1.45;
      if (src === "designer2.jpg") scale *= 1.2;

      const s=Math.min(120/img.naturalWidth,1)*scale;
      d.style.width=Math.round(img.naturalWidth*s)+"px";
      d.style.height=Math.round(img.naturalHeight*s)+"px";
      d.style.left=rand(40,innerWidth-d.offsetWidth-40)+"px";
      d.style.top =rand(80,innerHeight-d.offsetHeight-40)+"px";
    };

    let dragging=false,sx,sy,sl,st;
    d.addEventListener("pointerdown",e=>{
      e.preventDefault();
      bringToFront(d);
      dragging=true;
      sx=e.clientX; sy=e.clientY;
      sl=parseFloat(d.style.left); st=parseFloat(d.style.top);
      d.setPointerCapture(e.pointerId);
      phys.get(d).drag=true;
    });

    d.addEventListener("pointermove",e=>{
      if(!dragging) return;
      const dx=e.clientX-sx,dy=e.clientY-sy;
      d.style.left=clamp(sl+dx,12,innerWidth-d.offsetWidth-12)+"px";
      d.style.top =clamp(st+dy,12,innerHeight-d.offsetHeight-12)+"px";
      const p=phys.get(d);
      p.target=p.base+clamp(dx*0.15,-18,18);
      start();
    });

    d.addEventListener("pointerup",()=>{
      dragging=false;
      const p=phys.get(d);
      p.drag=false;
      p.target=p.base;
      start();
    });
  });

})();
</script>

</body>
</html>
